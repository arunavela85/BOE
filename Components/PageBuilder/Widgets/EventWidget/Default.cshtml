
@using dcboe.Components.Widgets.EventWidget;
@addTagHelper *, Kentico.Content.Web.Mvc
@using Microsoft.AspNetCore.Http.Extensions

@model IEnumerable<EventWidgetViewModel>

<div class="container py-3">
    <div class="row">
        <div class="col-lg-12">
            <div class="article">


                @{ int i = 0; }

                @foreach (EventWidgetViewModel item in Model)
                {
                    if (item.showButton)
                    {
                        <div class="newsItem" id="readspeaker-content">
                            <span class="ISI_MESSAGE"></span>
                            <h6>@item.start</h6>
                            <a role="link" href=@item.url target="_blank">@item.title </a>

                            <hr>
                        </div>

                        i++;
                    }



                }
                @foreach (EventWidgetViewModel item in Model)
                {
                    if (item.showButton)
                    {
                        <a href="@Context.Request.GetEncodedUrl()" role="button" title="View All Events" class="btn btn--default">View all News</a>

                    }
                    else
                    {
                        <div id="calendar"></div>

                    }
                    break;
                }


            </div>
        </div>
    </div>
</div>
<script>
    document.addEventListener('DOMContentLoaded', function () {
        var calendarEl = document.getElementById('calendar');
        var calendar = new FullCalendar.Calendar(calendarEl, {
            headerToolbar: {
                left: 'prev,next today',
                center: 'title',
                right: 'dayGridMonth,timeGridWeek,timeGridDay,listMonth'
            },
            initialDate: new Date(),
            navLinks: true, // can click day/week names to navigate views
            businessHours: true, // display business hours
            editable: true,
            selectable: true,
            events: JSON.parse('@Newtonsoft.Json.JsonConvert.SerializeObject(@Model)'.replaceAll('&quot;', '"'))
        });
    calendar.render();
    });
</script>
